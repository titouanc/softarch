\section{Exercise 1 : BPEL Processes}

\subsection{Correct the error about the PortType}
    \subsubsection{What is the Port Type of a Webservice ? Why is it important for the LibrarySearch BPEL process ?}
    A web service Port Type is the abstract interface for a web service component. It define the name, input, failure and output of the operations a webservice of this port type should implement. These implementations are provided through bindings.

    \subsubsection{Fix the error. Give a brief summary of your changes in the report. Document changes in other files, if necessary}

    We had to change the port type of the \texttt{InvokeSearchForBooks} task in the BPEL process to the one defined in the National Library description (\url{http://localhost:8181/NationalLibrary/services/LibraryService?wsdl}): \texttt{LibraryService}. Since it is imported in the \texttt{nl} namespace in our BPEL file, we have to write \texttt{nl:LibraryService}.

    \subsubsection{Using BPEL constructs, explain what happens in AssignResultSoftLib near the end of the process file}

\subsection{Notice that the SOFT Library only returns books in French, even though it has English books as well}

    \subsubsection{Find out why this is the case, and correct the problem so that SOFT Library searcher returns books in English as well. Document the solution in the
    report}

The BPEL process uses an xsl transformation stylesheet to combine the ouptuts from the two providers libraries into one. One of the template matching tags is an XPath query for all books in english (\texttt{<xsl:template match="//book[language='en']"></xsl:template>}). As this tag is empty, it replaces any book in english with nothing, and therefore we only see books in french. However, if the Soft Lab Library contained books in other languages, we would see them in the query result.

To obtain books in all language, it is sufficient to remove this tag, as the previous rewrite rule will match and return all nodes.

\subsubsection{Analyse the data that the two web services return. Are they the same? Why
could this be a problem in a system? What is a possible solution ?}

The data are not the same. The problem is that there can be parsing problems. And if a third web service is added it might return yet another data structure. The solution is to use XSLT in the BPEL process to return the same data structure whatever the service.

\section{Exercise 2 : Integration with Legacy Software}

    – What did you change in the web portal application?
    The \texttt{DatabaseFacade} method \texttt{findRecords}. We added a \texttt{RegularDatabase} implementation for the web service (\texttt{WebserviceRegularDatabase}). The latter is an attribute of the \texttt{DatabaseFacade}
    – How did your refactoring from the last assignment help or hinder you with
    this task?
    It did not help at all. Point.
    – Which pattern or architectural style did you use for the tasks (if any) ?
    – With respect to second part of Exercise 1 (Analysing the results of the two
    web services): How did you integrate the results in the web portal application?
    Which element in your architecture is responsible, and what are the benefits
    and drawbacks of your design?
    The daatabase layer is responsible. Benefit : the application layer does not know anything about the webservice. Drawback : can't choose whether to query web services or not.

\section{Exercise 3 : Architecture}

    • Chose an appropriate visualization, for example a UML or block diagram. The
    diagram should allow to see the connections between the relevant elements in this
    architecture, e.g., the involved web services, and the relevant parts of the web
    portal application. Also minimally depict your architecture which results from
    your design choices in exercise 2.

    • Briefly describe your diagram and name the relevant concepts/architectural styles.
    Do not go into the details for responsible classes etc., the architecture has to show
    logical components, not primarily implementation details. Often you will have no
    control over available web services, so treat the library web services as if they where
    provided by external providers.
